<app-page-header-admin>
</app-page-header-admin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<div class="bkg-services">
  <div class="serviceList">
    <div class="createService">
      <button class="create">
        <i class="fa fa-plus-circle" title="Add new service" (click)="toggleAdd()"></i>
      </button>
    </div>
    <div class="rectangle" *ngFor="let service of serviceList">
      <!-- service -->
      <div class="service">
        <div class="edit-delete">
          <div class="serviceName">
            <p>{{service.name}}</p>
          </div>

          <button class="edit">
            <i class="fa fa-edit" style="font-size:30px;" title="Edit this service" (click)="toggleEdit(service)"></i>
          </button>
          <button class="delete">
            <i class="fa fa-trash-o" style="font-size:30px;" title="Delete this service" (click)="toggleDelete()"></i>
          </button>

        </div>
        <div class="serviceDesc">
          <p>{{service.description}}</p>
        </div>
        <div class="office">
          <p *ngIf="service.office_id">{{service.office_id.name}}</p>
        </div>
        <div class="serviceInfo">
          <div class="spaces">
            <span>{{service.spaces}}</span>
            <p>Spaces</p>
          </div>
          <div class="duration">
            <span>{{service.duration}} hour(s)</span>
            <p>Duration</p>
          </div>
          <div class="price">
            <span>{{service.price}} Lei</span>
            <p>Price</p>
          </div>
        </div>
      </div>
    </div>
    <div class="delete-modal" *ngIf="deleteEnabled">
      <div class="on-delete">
        <div style="float:right;">
          <button type="button" class="close" (click)="toggleUndo()">x</button>
        </div>
        <p>You`re sure you want to delete it?</p>
        <div class="approve">
          <div class="approve-div">
            <button class="approve-yes" (click)="deleteService(service)">Yes</button>
            <button class="approve-no" (click)="toggleUndo()">No</button>
          </div>
        </div>
      </div>
    </div>
    <!-- edited service -->
    <div class="modal" *ngIf="editEnabled">
      <form class="serviceEdit" (ngSubmit)="update()" #edit="ngForm">
        <div class="edit-delete">
          <div class="addNewService">
            <p>Edit service</p>
          </div>
          <button type="submit" class="createButton" title="Save changes" [disabled]="!edit.valid">
            <i class="fa fa-save icons"></i>
          </button>
          <button class="deleteButton">
            <i class="fa fa-times-circle icons" title="Cancel" (click)="toggleUndo()"></i>
          </button>
        </div>
        <p class="editInfo">SERVICE DETAILS</p>
        <div class="element-res">
          <div class="element-up">
            <div class="createNewName">
              <div>
                <label for="newName">Service name</label>
              </div>
              <input type="text" class="newName" id="newName" name="newName" [(ngModel)]="serviceData.name" required
                pattern="[a-zA-Z0-9- ]{1,30}" #newName="ngModel">
              <div class="error_message">
                <label for="newName" class="fa fa-exclamation-triangle" *ngIf="! newName.valid && newName.touched">
                  Please enter a valid
                  name
                  format!
                </label>
              </div>
            </div>
            <div class="createNewDesc">
              <div>
                <label for="textarea">Service description</label>
              </div>
              <textarea rows="9" maxlength="300" name="textarea" id="textarea" class="createTextarea" [(ngModel)]="serviceData.description"
                required pattern=".{10,}" #textarea="ngModel"></textarea>
              <div class="error_message">
                <label for="textarea" class="fa fa-exclamation-triangle" *ngIf="! textarea.valid && textarea.touched">
                  Please enter a
                  valid
                  description
                  format!
                </label>
              </div>
            </div>
          </div>
          <div class="element-down">
            <div class="createNewName">
              <div>
                <label for="spaces">Spaces</label>
              </div>
              <input type="text" class="newName" id="spaces" name="spaces" [(ngModel)]="serviceData.spaces" required
                pattern="[0-9]{1,5}" #spaces="ngModel">
              <div class="error_message">
                <label for="spaces" class="fa fa-exclamation-triangle" *ngIf="! spaces.valid && spaces.touched"> Please
                  enter a valid
                  spaces
                  format!
                </label>
              </div>
            </div>
            <div class="createNewName">
              <div>
                <label for="duration">Duration(hour)</label>
              </div>
              <input type="text" class="newName" id="duration" name="duration" [(ngModel)]="serviceData.duration"
                required pattern="[0-9,:; ]{1,5}" #duration="ngModel">
              <div class="error_message">
                <label for="duration" class="fa fa-exclamation-triangle" *ngIf="! duration.valid && duration.touched">
                  Please enter a
                  valid
                  duration
                  format!
                </label>
              </div>
            </div>
            <div class="createNewName">
              <div>
                <label for="price">Price(LEI)</label>
              </div>
              <input type="text" class="newName" name="price" id="price" [(ngModel)]="serviceData.price" required
                pattern="[0-9]{1,10}" #price="ngModel">
              <div class="error_message">
                <label for="price" class="fa fa-exclamation-triangle" *ngIf="! price.valid && price.touched"> Please
                  enter a valid
                  price
                  format!
                </label>
              </div>
            </div>
          </div>
        </div>
        <div class="companyOffice">
          <div>
            <label for="select">Select office</label>
          </div>
          <!-- *ngInit="serviceData.office_id AS serviceData.office_id._id" -->
          <select class="selectOffice" name="select" id="select" [(ngModel)]="serviceData.office_id" required #select="ngModel">
            <option *ngFor="let office of officesList" class="" [value]="office._id">{{office.name}}</option>
          </select>
          <div class="error_message">
            <label for="select" class="fa fa-exclamation-triangle" *ngIf="! select.valid && select.touched"> Please
              choose the office!
            </label>
          </div>
        </div>
      </form>
    </div>

    <!-- create service -->
    <div class="modal" *ngIf="createEnabled">
      <form class="serviceEdit" (ngSubmit)="addService()" #create="ngForm">
        <div class="edit-delete">
          <div class="addNewService">
            <p>Create new service</p>
          </div>
          <button type="submit" class="createButton" title="Create service" [disabled]="!create.valid">
            <i class="fa fa-plus-circle icons"></i>
          </button>
          <button class="deleteButton">
            <i class="fa fa-times-circle icons" title="Cancel" (click)="toggleUndo()"></i>
          </button>
        </div>
        <p class="editInfo">SERVICE DETAILS</p>
        <div class="element-res">
          <div class="element-up">
            <div class="createNewName">
              <div>
                <label for="newName">Service name</label>
              </div>
              <input type="text" class="newName" name="newName" id="newName" [(ngModel)]="serviceData.name" required
                pattern="[a-zA-Z0-9- ]{1,30}" #newName="ngModel">
              <div class="error_message">
                <label for="newName" class="fa fa-exclamation-triangle" *ngIf="! newName.valid && newName.touched">
                  Please enter a valid
                  name
                  format!
                </label>
              </div>
            </div>
            <div class="createNewDesc">
              <div>
                <label for="textarea">Service description</label>
              </div>
              <textarea rows="9" maxlength="300" name="textarea" id="textarea" class="createTextarea" [(ngModel)]="serviceData.description"
                required pattern=".{10,}" #textarea="ngModel"></textarea>
              <div class="error_message">
                <label for="textarea" class="fa fa-exclamation-triangle" *ngIf="! textarea.valid && textarea.touched">
                  Please enter a
                  valid
                  description
                  format!
                </label>
              </div>
            </div>
          </div>
          <div class="element-down">
            <div class="createNewName">
              <div>
                <label for="spaces">Spaces</label>
              </div>
              <input type="text" class="newName" name="spaces" id="spaces" [(ngModel)]="serviceData.spaces" required
                pattern="[0-9]{1,5}" #spaces="ngModel">
              <div class="error_message">
                <label for="spaces" class="fa fa-exclamation-triangle" *ngIf="! spaces.valid && spaces.touched"> Please
                  enter a valid
                  spaces
                  format!
                </label>
              </div>
            </div>
            <div class="createNewName">
              <div>
                <label for="duration">Duration(hour)</label>
              </div>
              <input type="text" class="newName" name="duration" id="duration" [(ngModel)]="serviceData.duration"
                required pattern="[0-9,:; ]{1,5}" #duration="ngModel">
              <div class="error_message">
                <label for="duration" class="fa fa-exclamation-triangle" *ngIf="! duration.valid && duration.touched">
                  Please enter a
                  valid
                  duration
                  format!
                </label>
              </div>
            </div>
            <div class="createNewName">
              <div>
                <label for="price">Price(LEI)</label>
              </div>
              <input type="text" class="newName" name="price" id="price" [(ngModel)]="serviceData.price" required
                pattern="[0-9]{1,10}" #price="ngModel">
              <div class="error_message">
                <label for="price" class="fa fa-exclamation-triangle" *ngIf="! price.valid && price.touched"> Please
                  enter a valid
                  price
                  format!
                </label>
              </div>
            </div>
          </div>
        </div>
        <div class="companyOffice">
          <div>
            <label for="select">Select office</label>
          </div>
          <select class="selectOffice" name="select" id="select" [(ngModel)]="serviceData.office_id" required #select="ngModel">
            <option *ngFor="let office of officesList" class="" [value]="office._id">{{office.name}}</option>
          </select>
          <div class="error_message">
            <label for="select" class="fa fa-exclamation-triangle" *ngIf="! select.valid && select.touched"> Please
              choose the office!
            </label>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
